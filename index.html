<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Calculadora de Pr√©stamos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
    name="description"
    content="Calculadora de pr√©stamos sencilla, optimizada para m√≥viles y personas mayores. Calcula tu cuota mensual, intereses totales y coste total."
  />
  <link rel="icon" href="img/logo.png?v=2" type="image/png">
  
  <link rel="stylesheet" href="style.css" />
  <script defer src="script.js"></script>
</head>
<body>
  <div class="page">

    <header class="banner">
      <div class="banner-inner">
        <div class="banner-left">
          <img src="img/logo.png" alt="Logo AEFA completo" class="banner-logo" />
          <div class="banner-text">
            <h1>ASESORAMIENTO ECON√ìMICO</h1>
            <h2>Financiero Andaluc√≠a</h2>
            <p class="banner-web">www.grupoaefa.com</p>
          </div>
        </div>
      </div>
    </header>

    <main class="container main">

      <section class="card">
        <header class="card-header">
          <h2>Datos del pr√©stamo</h2>
          <p>Introduce los datos de tu pr√©stamo para calcular la cuota mensual</p>
        </header>

        <div class="card-content">
          <div class="field">
            <label for="cantidadCompra" class="field-label">Cantidad de compra (‚Ç¨)</label>
            <p class="field-help">Coste total de la operaci√≥n (ej. vivienda).</p>
            <div class="field-row">
              <button type="button" id="cantidadCompraMenos" class="btn btn-outline btn-square">&minus;</button>
              <input id="cantidadCompra" type="text" inputmode="decimal" class="input field-input" />
              <button type="button" id="cantidadCompraMas" class="btn btn-outline btn-square">+</button>
            </div>
            <input type="range" id="rangeCompra" class="range-input" min="0" max="1000000" step="1000" />
          </div>

          <div class="field">
            <label class="field-label">Porcentaje de financiaci√≥n</label>
            <div id="porcentajeFinanciacion" class="field-dinamico">0 %</div>
          </div>
          
          <div class="field">
            <label for="cantidad" class="field-label">Cantidad del pr√©stamo (‚Ç¨)</label>
            <p class="field-help">¬øCu√°nto dinero necesitas solicitar?</p>
            <div class="field-row">
              <button type="button" id="cantidadMenos" class="btn btn-outline btn-square">&minus;</button>
              <input id="cantidad" type="text" inputmode="decimal" class="input field-input" />
              <button type="button" id="cantidadMas" class="btn btn-outline btn-square">+</button>
            </div>
            <input type="range" id="rangePrestamo" class="range-input" min="0" max="1000000" step="1000" />
          </div>

          <div class="field">
            <label for="plazo" class="field-label">Plazo</label>
            <p class="field-help">¬øEn cu√°nto tiempo quieres devolverlo?</p>

            <div class="select-wrapper-top">
               <select id="tipoPlazo" class="select select-full-width">
                <option value="a√±os">A√±os</option>
                <option value="meses">Meses</option>
              </select>
            </div>

            <div class="field-row field-row-plazo">
              <button type="button" id="plazoMenos" class="btn btn-outline btn-square">&minus;</button>
              <input id="plazo" type="text" inputmode="decimal" class="input field-input" />
              <button type="button" id="plazoMas" class="btn btn-outline btn-square">+</button>
            </div>
            <input type="range" id="rangePlazo" class="range-input" min="1" max="40" step="1" />
          </div>

          <div class="field">
            <label for="interes" class="field-label">Inter√©s anual (%)</label>
            <p class="field-help">¬øQu√© porcentaje de inter√©s te aplican?</p>
            <div class="field-row">
              <button type="button" id="interesMenos" class="btn btn-outline btn-square">&minus;</button>
              <input id="interes" type="text" inputmode="decimal" class="input field-input" />
              <button type="button" id="interesMas" class="btn btn-outline btn-square">+</button>
            </div>
            <input type="range" id="rangeInteres" class="range-input" min="0" max="20" step="0.05" />
          </div>

          <div class="field">
            <label for="tipoITP" class="field-label">Tipo de ITP</label>
            <p class="field-help">Selecciona el porcentaje de impuesto.</p>
            <div class="select-wrapper-movil" style="display: block;">
              <select id="tipoITP" class="select" style="max-width: none;">
                <option value="3.5">3.5% (Reducido)</option>
                <option value="7">7% (General)</option>
              </select>
            </div>
          </div>

          <div class="actions">
            <button id="calcularBtn" class="btn btn-primary btn-big">üßÆ Calcular</button>
            <button id="limpiarBtn" class="btn btn-outline btn-big">‚ü≥ Limpiar</button>
          </div>
        </div>
      </section>

      <section class="card">
        <header class="card-header">
          <h2>Situaci√≥n Financiera del Cliente</h2>
          <p>Introduce tus ingresos y deudas actuales para calcular la tasa de esfuerzo.</p>
        </header>

        <div class="card-content">

          <div class="field">
            <label for="ingresos" class="field-label">Ingresos netos mensuales (‚Ç¨)</label>
            <p class="field-help">Salario neto y otros ingresos demostrables.</p>
            <input id="ingresos" type="text" inputmode="decimal" class="input field-input" />
          </div>

          <div class="field">
            <label for="deudas" class="field-label">Deudas mensuales actuales (‚Ç¨)</label>
            <p class="field-help">Incluye hipoteca, pr√©stamos, tarjetas y financiaciones.</p>
            <input id="deudas" type="text" inputmode="decimal" class="input field-input" />
          </div>

        </div>
      </section>

      <section id="resultados" class="results" aria-hidden="true" aria-live="polite">

        <article class="card card-highlight">
          <header class="card-header"><h2>Tu cuota mensual ser√°:</h2></header>
          <div class="card-content">
            <p id="cuotaMensual" class="cuota-grande">0,00 ‚Ç¨</p>
          </div>
        </article>

        <div class="results-grid">

          <article class="card card-secondary">
            <header class="card-header"><h3>Intereses totales</h3></header>
            <div class="card-content">
              <p id="interesesTotales" class="resultado-numero">0,00 ‚Ç¨</p>
            </div>
          </article>

          <article class="card card-secondary">
            <header class="card-header"><h3>Coste total</h3></header>
            <div class="card-content">
              <p id="costeTotal" class="resultado-numero">0,00 ‚Ç¨</p>
            </div>
          </article>

        </div>

        <article class="card">
          <header class="card-header"><h3>Desglose de tu pr√©stamo</h3></header>
          <div class="card-content breakdown">
            <div class="breakdown-row"><span>Cantidad solicitada:</span><span id="cantidadSolicitada"></span></div>
            <div class="breakdown-row"><span>Inter√©s anual aplicado:</span><span id="interesAnual"></span></div>
            <div class="breakdown-row"><span>Plazo total:</span><span id="plazoTotalTexto"></span></div>
          </div>
        </article>

        <article class="card" id="gastosCard">
          <header class="card-header"><h3>Gastos de la operaci√≥n</h3></header>
          <div class="card-content breakdown">
            <div class="breakdown-row"><span>ITP (<span id="itpTipoTexto"></span>):</span><span id="gastoITP"></span></div>
            <div class="breakdown-row"><span>Notar√≠a:</span><span id="gastoNotaria"></span></div>
            <div class="breakdown-row"><span>Registro:</span><span id="gastoRegistro"></span></div>
            <div class="breakdown-row"><span>Gestor√≠a del Banco:</span><span id="gastoGestoria"></span></div>
            <div class="breakdown-row"><span>Tasaci√≥n:</span><span id="gastoTasacion"></span></div>
            <div class="breakdown-row"><span>Seguro de Hogar:</span><span id="gastoHogar"></span></div>
            
            <div class="breakdown-row gastos-input-row">
              <label for="seguroVidaInput">Seguro de Vida:</label>
              <input id="seguroVidaInput" type="text" inputmode="decimal" class="input-inline" placeholder="0"/>
            </div>
            
            <div class="breakdown-row total-gastos"><span>Total Gastos:</span><span id="gastoTotal"></span></div>
          </div>
        </article>
        <article class="card card-muted">
          <div class="card-content">
            <p class="texto-explicativo">
              Con estos datos pagar√≠as 
              <span id="cuotaMensualTexto" class="text-resaltado"></span>
              cada mes durante
              <span id="mesesTotalesTexto" class="text-resaltado"></span>,
              con un total de intereses de
              <span id="interesesTotalesTexto" class="text-resaltado"></span>.
            </p>
          </div>
        </article>

        <article class="card card-secondary" id="tasaSimpleCard">
          <header class="card-header">
            <h3>Tasa de esfuerzo (simple)</h3>
            <p>Relaciona la cuota del pr√©stamo con tus ingresos mensuales.</p>
          </header>
          <div class="card-content">
            <p id="tasaSimpleValor" class="resultado-numero riesgo-valor">0 %</p>
          </div>
        </article>

        <article class="card card-highlight" id="tasaCompletaCard">
          <header class="card-header">
            <h3>Tasa de esfuerzo (completa)</h3>
            <p>Incluye tus deudas mensuales actuales + la nueva cuota.</p>
          </header>
          <div class="card-content">
            <p id="tasaCompletaValor" class="cuota-grande riesgo-valor">0 %</p>
            <p id="textoRiesgo" class="texto-explicativo riesgo-texto" style="margin-top: 0.5rem;"></p>
            <p id="explicacionTasaCompleta" class="texto-explicativo" style="margin-top: 0.5rem;"></p>
          </div>
        </article>

        <article class="card" id="historialCard" style="display: none;">
          <header class="card-header">
            <h3>Historial de esta sesi√≥n</h3>
            <p>Tus √∫ltimos c√°lculos para comparar.</p>
          </header>
          <div class="card-content">
            <div class="historial-lista" id="listaHistorial">
              </div>
            <button id="borrarHistorialBtn" class="btn btn-outline" style="margin-top: 1rem; width: 100%; height: 3rem; font-size: 1rem;">Borrar historial</button>
          </div>
        </article>

      </section>
    </main>

    <footer class="footer-aefa">
      <div class="footer-inner">
        <div class="footer-info">
          <p>Juan de Cabanilles, 11 4¬∫ OF. 416 ‚Äî 29018 ¬∑ M√°laga</p>
          <p>www.grupoaefa.com ¬∑ info@grupoaefa.com ¬∑ 645 806 436</p>
        </div>
      </div>
    </footer>

  </div>
</body>
</html>